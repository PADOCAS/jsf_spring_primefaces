<?xml version="1.0" encoding="UTF-8"?>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/JSP_Servlet/XHtml.xhtml to edit this template
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:sec="http://www.springframework.org/security/tags"
      xmlns:c="http://java.sun.com/jsp/jstl/core">    

    <sec:authorize access="isAuthenticated()">
        <h:head>        
            <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
            <title> 
                <ui:insert name="titulo">Projeto JSF/Spring</ui:insert>
            </title>

            <!--Declarando o javascript jquery > direto da biblioteca do próprio primefaces-->        
            <h:outputScript library="primefaces" name="jquery/jquery.js" />

            <!--<h:outputScript name="primefaces.js" library="primefaces" id="jsPrime"/>-->
            <!--<h:outputScript name="jquery.js" library="primefaces/jquery" id="jsJquery"/>-->
            <!--<h:outputScript name="jquery-plugins.js" library="primefaces/jquery" id="jsJqueryPlugin"/>-->
            <h:outputScript name="jquery.cookie.js" library="js" id="jsJaqueryCookie"/>
            <!--<h:outputStylesheet name="jquery-ui.css" library="primefaces/jquery/ui" id="jsJqueryUi"/>-->
            <!--<h:outputStylesheet name="primefaces.css" library="primefaces" id="jdPrimeCss"/>-->
            <h:outputScript name="jquery.maskMoney.min.js" library="js" id="jsMaskMoneySistema"/>
            <h:outputScript name="jquery.maskedinput.js" library="js" id="jsMaskInputSistema"/>
            <h:outputScript name="scripty.js" library="js" id="jsScriptSistema"/>
            <h:outputScript name="jsf.js" library="javax.faces"/>
            <h:outputScript name="googlechart.js" library="js"/> 
            <h:outputScript name="deployJava.js"  library="js" />
            <!--JavaScript para atalhos-->
            <h:outputScript id="scriptAtalhos" library="js" name="atalhosGerador.js"/>
            <ui:insert name="head"/>
        </h:head>

        <style type="text/css">
            /*Configuraçõe para centralizar os textos dos dialogs (título e footer)*/
            .ui-dialog-title {
                float:none !important;
            }

            .ui-dialog-titlebar {
                text-align: center !important;
            }

            .ui-dialog-footer {
                text-align: center !important;
            }
        </style>

        <h:body>
            <f:view>
                <h:form id="form" class="form" enctype="#{enctype ne null and not empty enctype ? enctype : 'application/x-www-form-urlencoded'}">
                    <ui:insert name="form"/>

                    <!--Fazendo dessa forma, ao incluir o template na página, toda chamada ajax vai fazer a abertura e fechamento do dialog automaticamente após o processamento-->
                    <!--Com isso, não é necessário fazer a chamada manual para todos os eventos ajax-->
                    <!--Ajax para executar a abertura e fechamento do dialog assim que acabar o processamento-->
                    <!--Nesse caso com ajax chamando fica automatico, faz o show e hide automaticamente após acabar o processamento da chamada ajax-->
                    <!--<p:ajaxStatus id="ajaxStatus" onstart="PF('statusDialog').show();" onsuccess="PF('statusDialog').hide();" />-->

                    <!--Header para aparecer Processando escrito-->
                    <!--Footer para aparecer aguarde...-->
                    <!--Modal e não deixar mudar ele de lugar pelo usuário-->
                    <!--closable = false Não deixar fechar ele pelo usuário-->
                    <!--appendTo para aparecer sempre a frente de todo conteudo que estiver utilizando nas páginas-->
                    <!--Dentro dele vai ter o gif do progress bar-->
                    <p:dialog id="dlgAjaxStatusProgressBar"
                              widgetVar="statusDialog"
                              modal="true"
                              resizable="false"
                              height="200px;"
                              width="200px;"
                              header="Aguarde Processando"
                              draggable="false"
                              appendTo="@(body)"
                              dynamic="false"
                              closable="false">
                        <h:graphicImage id="imgAjaxStatusLoader" library="img" name="ajax-loader.gif" styleClass="bordaImagem" />
                    </p:dialog>

                    <!--Criado um dialog para fazer manualmente:-->
                    <!--Esse pode ser fechado, pois pode ter dado erro e o usuário fecha ele manualmente-->
                    <p:dialog id="dlgAjaxStatusError"
                              widgetVar="statusDialogError"
                              modal="true"
                              resizable="false"
                              height="200px;"
                              width="200px;"
                              header="Erro ao processar"
                              draggable="false"
                              appendTo="@(body)"
                              dynamic="false"
                              closable="true">
                        <h:graphicImage id="imgAjaxStatusError" library="img" name="error.png" styleClass="bordaImagem" />
                    </p:dialog>

                    <p:growl id="message" widgetVar="message" showSummary="true" showDetail="true" globalOnly="true"
                             escape="false" sticky="true" />
                </h:form>
            </f:view>
        </h:body>
    </sec:authorize>
</html>

